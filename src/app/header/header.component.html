<header class="site-header">
  <div class="site-header-wrapper">
    <h1>
      <button  [routerLink]="HOME" routerLinkActive="active-link" ariaCurrentWhenActive="page" mat-menu-item><img src="../../assets/images/logo.png" alt="Bethany's Pie Shop Logo" /></button>
    </h1>
    <nav>
      <ul>
        <li>
          <button class="menu-item" mat-button [matMenuTriggerFor]="menu">Shop <span>&#8964;</span></button>
          <mat-menu class="menu-dropdown" #menu="matMenu">
            <button mat-menu-item (click)="changeCategory('Seasonal Pies')">Seasonal Pies</button>
            <button mat-menu-item (click)="changeCategory('Fruit Pies')">Fruit Pies</button>
            <button mat-menu-item (click)="changeCategory('Cheesecakes')">Cheesecakes</button>
            <button mat-menu-item (click)="changeCategory('All Pies')">All Pies</button>
          </mat-menu>
        </li>
        <li><button  [routerLink]="CONTACT"  routerLinkActive="active-link" class="menu-item" mat-button>Contact</button></li>
        <li><button  [routerLink]="ABOUT"  routerLinkActive="active-link" class="menu-item" mat-button>About</button></li>
      </ul>
    </nav>
    <div class="header-icons">
      <ul>
        @let userId = this.authService.userId();
        <li>
          <button mat-menu-item class="user-icon">
          @if(!userId){
            <span  [routerLink]="LOGIN"  routerLinkActive="active-link" class="log-in">Log In</span>
            <img src="../../assets/images/user-icon.png" height="35" width="35" alt="user" />
          } @else {
            @let user = this.authService.authenticatedUser.value();
            <span  [routerLink]="HOME"  routerLinkActive="active-link" class="log-out">Log Out {{user?.name}}</span>
            <img src="../../assets/images/user-icon.png" height="35" width="35" alt="user" />
          }
        </button></li>
        @let totalItems = this.cartService.cartTotals().totalCartCount;
        <li><button mat-menu-item [routerLink]="CART" routerLinkActive="active-link">
          <span class="total-items">{{ totalItems }}</span>
          <img src="../../assets/images/cart-icon.png" alt="" />
        </button></li>
      </ul>
    </div>
  </div>
</header>
